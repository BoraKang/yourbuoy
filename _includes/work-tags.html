{%- assign _articles = site.categories.work | default: empty -%}

{%- comment -%}
Collect tags only from work articles
{%- endcomment -%}
{%- assign _tag_names = '' | split: '|' -%}
{%- for a in _articles -%}
  {%- if a.tags -%}
    {%- for t in a.tags -%}
      {%- assign _tag_names = _tag_names | push: t -%}
    {%- endfor -%}
  {%- endif -%}
{%- endfor -%}

{%- assign _tag_names = _tag_names | uniq | sort -%}

{%- if _tag_names and _tag_names.size > 0 -%}
<div class="site-tags js-tags">
  <a class="tag-button active" data-tag="all">
    Show All <span class="count">{{ _articles.size }}</span>
  </a>

  {%- for t in _tag_names -%}
    {%- assign _cnt = 0 -%}
    {%- for a in _articles -%}
      {%- if a.tags contains t -%}
        {%- assign _cnt = _cnt | plus: 1 -%}
      {%- endif -%}
    {%- endfor -%}

    <a class="tag-button" data-tag="{{ t | escape }}">
      {{ t }} <span class="count">{{ _cnt }}</span>
    </a>
  {%- endfor -%}
</div>
{%- endif -%}
